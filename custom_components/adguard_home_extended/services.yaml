set_blocked_services:
  name: Set Blocked Services
  description: Set the list of services to block globally in AdGuard Home with optional time-based schedule.
  fields:
    services:
      name: Services
      description: List of service IDs to block (e.g., facebook, youtube, tiktok). Any services not in this list will be unblocked.
      required: true
      example: '["facebook", "instagram", "tiktok"]'
      selector:
        object:
    schedule:
      name: Schedule
      description: >-
        Optional time-based schedule for blocking (v0.107.56+).
        Format is {"time_zone": "Local", "mon": {"start": 0, "end": 86399999}, ...}.
        Times are milliseconds from midnight.
      required: false
      example: '{"time_zone": "Local", "mon": {"start": 0, "end": 86399999}}'
      selector:
        object:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

add_filter_url:
  name: Add Filter URL
  description: Add a new filter list URL to AdGuard Home.
  fields:
    name:
      name: Name
      description: A friendly name for the filter list.
      required: true
      example: "My Custom Filter"
      selector:
        text:
    url:
      name: URL
      description: The URL of the filter list (must be a valid URL ending in .txt or similar).
      required: true
      example: "https://example.com/filters.txt"
      selector:
        text:
    whitelist:
      name: Whitelist
      description: If true, adds this as a whitelist instead of a blocklist.
      required: false
      default: false
      selector:
        boolean:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

remove_filter_url:
  name: Remove Filter URL
  description: Remove a filter list URL from AdGuard Home.
  fields:
    url:
      name: URL
      description: The URL of the filter list to remove.
      required: true
      example: "https://example.com/filters.txt"
      selector:
        text:
    whitelist:
      name: Whitelist
      description: If true, removes from whitelists instead of blocklists.
      required: false
      default: false
      selector:
        boolean:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

refresh_filters:
  name: Refresh Filters
  description: Force refresh all filter lists in AdGuard Home. This downloads the latest versions of all enabled filter lists.
  fields:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

set_client_blocked_services:
  name: Set Client Blocked Services
  description: Set the list of services to block for a specific client. This automatically disables "use global blocked services" for the client.
  fields:
    client_name:
      name: Client Name
      description: The name of the client to configure (must match a configured client in AdGuard Home).
      required: true
      example: "Kids Tablet"
      selector:
        text:
    services:
      name: Services
      description: List of service IDs to block for this client (e.g., facebook, youtube, tiktok). Services not in this list will be unblocked for this client.
      required: true
      example: '["tiktok", "youtube", "instagram"]'
      selector:
        object:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

add_dns_rewrite:
  name: Add DNS Rewrite
  description: Add a DNS rewrite rule to redirect a domain to a specific IP or another domain.
  fields:
    domain:
      name: Domain
      description: The domain name to rewrite (e.g., example.com or *.example.com for wildcard).
      required: true
      example: "ads.example.com"
      selector:
        text:
    answer:
      name: Answer
      description: The IP address or domain name to redirect to (use A.B.C.D for IPv4, AAAA for IPv6, or another domain).
      required: true
      example: "0.0.0.0"
      selector:
        text:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

remove_dns_rewrite:
  name: Remove DNS Rewrite
  description: Remove an existing DNS rewrite rule.
  fields:
    domain:
      name: Domain
      description: The domain name of the rewrite rule to remove.
      required: true
      example: "ads.example.com"
      selector:
        text:
    answer:
      name: Answer
      description: The answer (IP/domain) of the rewrite rule to remove.
      required: true
      example: "0.0.0.0"
      selector:
        text:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

check_host:
  name: Check Host
  description: Check how a domain would be filtered by AdGuard Home. Returns filtering result including reason, matching rules, and blocked service info. Optionally filter by client and query type (v0.107.58+).
  fields:
    domain:
      name: Domain
      description: The domain name to check (e.g., "example.com" or "ads.example.com").
      required: true
      example: "doubleclick.net"
      selector:
        text:
    client:
      name: Client
      description: Optional client ID to check filtering rules for a specific client. Uses global rules if not specified. Requires AdGuard Home v0.107.58+.
      required: false
      example: "192.168.1.100"
      selector:
        text:
    qtype:
      name: Query Type
      description: Optional DNS query type to check (e.g., "A", "AAAA", "CNAME", "MX"). Defaults to "A" if not specified. Requires AdGuard Home v0.107.58+.
      required: false
      example: "A"
      selector:
        select:
          options:
            - "A"
            - "AAAA"
            - "CNAME"
            - "MX"
            - "TXT"
            - "SRV"
            - "NS"
            - "PTR"
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

get_query_log:
  name: Get Query Log
  description: Retrieve paginated DNS query log entries. Supports filtering by domain search and response status. Use offset/limit for pagination to traverse large logs.
  fields:
    limit:
      name: Limit
      description: Maximum number of entries to return (1-5000). Default is 100.
      required: false
      default: 100
      example: 100
      selector:
        number:
          min: 1
          max: 5000
          mode: box
    offset:
      name: Offset
      description: Number of entries to skip for pagination. Default is 0 (start from most recent).
      required: false
      default: 0
      example: 0
      selector:
        number:
          min: 0
          mode: box
    search:
      name: Search
      description: Optional search string to filter by domain name.
      required: false
      example: "google.com"
      selector:
        text:
    response_status:
      name: Response Status
      description: Filter by response status. "all" returns all queries, "filtered" returns only blocked queries (v0.107.68+).
      required: false
      example: "all"
      selector:
        select:
          options:
            - label: "All queries"
              value: "all"
            - label: "Filtered/blocked only"
              value: "filtered"
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:
clear_query_log:
  name: Clear Query Log
  description: Clear all entries from the AdGuard Home query log. This action cannot be undone.
  fields:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:

reset_stats:
  name: Reset Statistics
  description: Reset all AdGuard Home statistics counters to zero. This action cannot be undone.
  fields:
    entry_id:
      name: Entry ID
      description: The config entry ID for the AdGuard Home instance. Required only when multiple instances are configured.
      required: false
      selector:
        text:
